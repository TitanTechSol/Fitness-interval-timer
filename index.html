<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fitness Interval Timer</title>
  <link rel="stylesheet" href="src/styles.css">
</head>
<body data-theme="dark">
  <div class="container">
    <!-- Main Timer View -->
    <div id="mainView">
      <!-- Settings Button -->
      <button id="settings" class="settings-btn">âš™ï¸</button>
      
      <div class="timer-section">
        <div class="time" id="display">10:00</div>
        
        <div class="buttons">
          <button id="start">Start</button>
          <button id="pause" disabled>Pause</button>
          <button id="stop">Stop</button>
        </div>
      </div>

      <!-- Timer Caption Area -->
      <div id="timerCaption" class="timer-caption hidden">
        <div class="caption-content">
          <div id="captionMessages" class="caption-messages"></div>
        </div>
      </div>
    </div>

    <!-- Settings View -->
    <div id="settingsView" style="display: none;">
      <div class="settings-view">
        
        <!-- Settings Header with Back Button -->
        <div class="settings-header">
          <button id="backBtn" class="back-btn">â† Back to Timer</button>
          <h2>Settings</h2>
        </div>
        
        <!-- Navigation Tabs -->
        <div class="settings-nav">
          <button class="nav-btn active" data-page="timer">
            <span class="nav-icon">â±ï¸</span>
            <span class="nav-text">Timer</span>
          </button>
          <button class="nav-btn" data-page="audio">
            <span class="nav-icon">ğŸ—£ï¸</span>
            <span class="nav-text">Audio</span>
          </button>
          <button class="nav-btn" data-page="shortcuts">
            <span class="nav-icon">âŒ¨ï¸</span>
            <span class="nav-text">Shortcuts</span>
          </button>
          <button class="nav-btn" data-page="workout">
            <span class="nav-icon">ğŸ’ª</span>
            <span class="nav-text">Workout</span>
          </button>
          <button class="nav-btn" data-page="system">
            <span class="nav-icon">âš™ï¸</span>
            <span class="nav-text">System</span>
          </button>
        </div>

        <!-- Timer Settings Page -->
        <div class="settings-page active" id="timerPage">
          
          <!-- Time Configuration -->
          <div class="setting-group">
            <h3>Duration</h3>
            <div class="setting-row">
              <span class="setting-label">Set Time</span>
              <div class="time-inputs">
                <input type="number" id="hours" class="time-input" min="0" max="23" value="0" placeholder="HH">
                <span>:</span>
                <input type="number" id="minutes" class="time-input" min="0" max="59" value="10" placeholder="MM">
                <span>:</span>
                <input type="number" id="seconds" class="time-input" min="0" max="59" value="0" placeholder="SS">
              </div>
            </div>
          </div>

          <!-- Random Mode -->
          <div class="setting-group">
            <h3>Random Mode</h3>
            <div class="setting-row">
              <span class="setting-label">Enable Random Intervals</span>
              <div class="slider-switch" id="randomModeSwitch"></div>
            </div>
            
            <div class="random-range-inputs" id="randomRangeInputs">
              <div class="range-group">
                <label>Minimum</label>
                <div class="time-inputs">
                  <input type="number" id="randomMinHours" class="time-input" min="0" max="23" value="0">
                  <span>:</span>
                  <input type="number" id="randomMinMinutes" class="time-input" min="0" max="59" value="5">
                  <span>:</span>
                  <input type="number" id="randomMinSeconds" class="time-input" min="0" max="59" value="0">
                </div>
              </div>
              <div class="range-group">
                <label>Maximum</label>
                <div class="time-inputs">
                  <input type="number" id="randomMaxHours" class="time-input" min="0" max="23" value="0">
                  <span>:</span>
                  <input type="number" id="randomMaxMinutes" class="time-input" min="0" max="59" value="15">
                  <span>:</span>
                  <input type="number" id="randomMaxSeconds" class="time-input" min="0" max="59" value="0">
                </div>
              </div>
            </div>
          </div>

          <!-- Other Settings -->
          <div class="setting-group">
            <h3>Preferences</h3>
            <div class="setting-row">
              <span class="setting-label">Sound Notifications</span>
              <div class="slider-switch active" id="soundSwitch"></div>
            </div>
            <div class="setting-row">
              <span class="setting-label">Auto-restart Timer</span>
              <div class="slider-switch" id="autoRestartSwitch"></div>
            </div>
            <div class="setting-row">
              <span class="setting-label">Desktop Notifications</span>
              <div class="slider-switch active" id="notifySwitch"></div>
            </div>
            <div class="setting-row">
              <span class="setting-label">Always on Top</span>
              <div class="slider-switch" id="alwaysOnTopSwitch"></div>
            </div>
            <div class="setting-row">
              <span class="setting-label">Volume</span>
              <div style="display: flex; align-items: center; gap: 8px;">
                <input type="range" id="volumeSlider" class="volume-slider" min="0" max="100" value="100">
                <span id="volumeDisplay">100%</span>
              </div>
            </div>
            <div class="setting-row">
              <span class="setting-label">Theme</span>
              <select id="themeSelector" class="theme-selector">
                <option value="dark">Dark</option>
                <option value="light">Light</option>
                <option value="blue">Blue</option>
                <option value="yellow">Yellow</option>
                <option value="orange">Orange</option>
              </select>
            </div>
          </div>

          <!-- Reset Button -->
          <div class="setting-group">
            <button id="reset">Reset All Settings</button>
          </div>

        </div>

        <!-- Messages Settings Page -->
        <div class="settings-page" id="audioPage">
          
          <!-- Voice Settings -->
          <div class="setting-group">
            <h3>Voice Settings</h3>
            
            <div class="setting-row">
              <span class="setting-label">Voice</span>
              <select id="voiceSelector" class="theme-select">
                <option value="0">Loading voices...</option>
              </select>
            </div>
            
            <div class="setting-row">
              <span class="setting-label">Speech Speed</span>
              <div class="volume-control">
                <input type="range" id="speechRateSlider" class="volume-slider" min="0.1" max="3" step="0.1" value="1">
                <span id="speechRateDisplay">Normal</span>
              </div>
            </div>
            
            <div class="setting-row">
              <span class="setting-label">Speech Pitch</span>
              <div class="volume-control">
                <input type="range" id="speechPitchSlider" class="volume-slider" min="0" max="2" step="0.1" value="1">
                <span id="speechPitchDisplay">Normal</span>
              </div>
            </div>
            
            <div class="setting-row">
              <span class="setting-label">Test Voice</span>
              <button id="testVoiceBtn" class="audio-buttons">ğŸ”Š Test Voice</button>
            </div>
          </div>

          <!-- Message Sequence Configuration -->
          <div class="setting-group">
            <h3>Message Sequence</h3>
            <div class="setting-row">
              <span class="setting-label">Number of Messages</span>
              <select id="audioCountSelector" class="audio-count-selector">
                <option value="1">1 Message</option>
                <option value="2">2 Messages</option>
                <option value="3">3 Messages (Default)</option>
                <option value="4">4 Messages</option>
              </select>
            </div>
            
            <div class="setting-row">
              <span class="setting-label">Test Sequence</span>
              <button id="testAudio" class="audio-buttons">ğŸµ Test Message Sequence</button>
            </div>
          </div>

          <!-- Message Categories -->
          <div class="setting-group">
            <h3>Message Categories</h3>
            
            <!-- Message Category 1 -->
            <div class="message-category">
              <div class="message-header">
                <div class="drop-zone-header">
                  <span class="audio-number">1</span>
                  <strong>Check-in Messages</strong>
                </div>
                <button class="test-category-btn" data-audio="1">ğŸ”Š Test</button>
              </div>
              <div class="message-preview" id="audio1Preview">
                Loading messages...
              </div>
              <div class="message-actions">
                <button class="edit-messages-btn" data-audio="1">âœï¸ Edit Messages</button>
                <button class="add-message-btn" data-audio="1">â• Quick Add</button>
              </div>
            </div>

            <!-- Message Category 2 -->
            <div class="message-category">
              <div class="message-header">
                <div class="drop-zone-header">
                  <span class="audio-number">2</span>
                  <strong>Action Detection Messages</strong>
                </div>
                <button class="test-category-btn" data-audio="2">ğŸ”Š Test</button>
              </div>
              <div class="message-preview" id="audio2Preview">
                Loading messages...
              </div>
              <div class="message-actions">
                <button class="edit-messages-btn" data-audio="2">âœï¸ Edit Messages</button>
                <button class="add-message-btn" data-audio="2">â• Quick Add</button>
              </div>
            </div>

            <!-- Message Category 3 -->
            <div class="message-category">
              <div class="message-header">
                <div class="drop-zone-header">
                  <span class="audio-number">3</span>
                  <strong>Workout Commands</strong>
                </div>
                <button class="test-category-btn" data-audio="3">ğŸ”Š Test</button>
              </div>
              <div class="message-preview" id="audio3Preview">
                Loading messages...
              </div>
              <div class="message-actions">
                <button class="edit-messages-btn" data-audio="3">âœï¸ Edit Messages</button>
                <button class="add-message-btn" data-audio="3">â• Quick Add</button>
              </div>
            </div>

            <!-- Message Category 4 -->
            <div class="message-category">
              <div class="message-header">
                <div class="drop-zone-header">
                  <span class="audio-number">4</span>
                  <strong>Custom Messages</strong>
                </div>
                <button class="test-category-btn" data-audio="4">ğŸ”Š Test</button>
              </div>
              <div class="message-preview" id="audio4Preview">
                Loading messages...
              </div>
              <div class="message-actions">
                <button class="edit-messages-btn" data-audio="4">âœï¸ Edit Messages</button>
                <button class="add-message-btn" data-audio="4">â• Quick Add</button>
              </div>
            </div>
          </div>

          <!-- Advanced Options -->
          <div class="setting-group">
            <h3>Advanced Options</h3>
            <div class="audio-buttons">
              <button id="openSoundsFolder">ğŸ“ Open Messages Folder</button>
              <button id="restoreBackup">ğŸ”„ Restore Defaults</button>
            </div>
          </div>

          <!-- Quick Tips -->
          <div class="setting-group">
            <h3>ğŸ’¡ Tips</h3>
            <div class="tips-list">
              <div class="tip">
                <span class="tip-icon">ğŸ“</span>
                <span><strong>Personalize your messages:</strong> Add your name or specific goals to make them more effective</span>
              </div>
              <div class="tip">
                <span class="tip-icon">ğŸ”„</span>
                <span><strong>Vary your tone:</strong> Mix gentle reminders with firm redirections for balanced motivation</span>
              </div>
              <div class="tip">
                <span class="tip-icon">âš¡</span>
                <span><strong>Keep messages short:</strong> Clear, concise messages are more impactful than long speeches</span>
              </div>
              <div class="tip">
                <span class="tip-icon">ğŸ¯</span>
                <span><strong>Test regularly:</strong> Preview your messages to ensure they sound natural and motivating</span>
              </div>
            </div>
          </div>

          <!-- Audio Actions -->
          <div class="setting-group">
            <h3>Actions</h3>
            <div style="display: flex; gap: 8px; flex-wrap: wrap;">
              <button id="testAudio">Test Audio Sequence</button>
              <button id="restoreMessages">ğŸ”„ Restore Original Messages</button>
              <button id="openSoundsFolder">Open Audio Folder</button>
            </div>
          </div>

        </div>

        <!-- Shortcuts Settings Page -->
        <div class="settings-page" id="shortcutsPage">
          
          <!-- Enable/Disable Shortcuts -->
          <div class="setting-group">
            <h3>Keyboard Shortcuts</h3>
            <div class="setting-row">
              <span class="setting-label">Enable Keyboard Shortcuts</span>
              <div class="slider-switch active" id="keyboardShortcutsSwitch"></div>
            </div>
            <p class="setting-description">
              Use keyboard shortcuts to control the timer even when the app is running in the background. 
              Perfect for staying productive in other applications!
            </p>
          </div>

          <!-- Shortcuts List -->
          <div class="setting-group">
            <h3>âŒ¨ï¸ Available Shortcuts</h3>
            <div class="shortcuts-list" id="shortcutsList">
              <!-- Shortcuts will be populated by JavaScript -->
            </div>
          </div>

          <!-- Advanced Tips -->
          <div class="setting-group">
            <h3>ğŸ’¡ Tips</h3>
            <div class="tips-list">
              <div class="tip">
                <span class="tip-icon">ğŸ¯</span>
                <span><strong>Global shortcuts:</strong> These work even when the timer is minimized or in the background</span>
              </div>
              <div class="tip">
                <span class="tip-icon">ğŸ¢</span>
                <span><strong>Office-friendly:</strong> Key combinations chosen to avoid conflicts with Word, Excel, and other apps</span>
              </div>
              <div class="tip">
                <span class="tip-icon">âš¡</span>
                <span><strong>Quick control:</strong> Start/pause/stop your timer without switching windows</span>
              </div>
              <div class="tip">
                <span class="tip-icon">ğŸ”„</span>
                <span><strong>Disable anytime:</strong> Toggle shortcuts off if you encounter conflicts with other software</span>
              </div>
            </div>
          </div>

        </div>

        <!-- Workout Settings Page -->
        <div class="settings-page" id="workoutPage">
          <div class="setting-group">
            <h3>ğŸ’ª Workout Settings</h3>
            <p>Workout and message-related settings coming soon...</p>
            <p><em>This page will be properly organized in the next phase.</em></p>
          </div>
        </div>

        <!-- System Settings Page -->
        <div class="settings-page" id="systemPage">
          <div class="setting-group">
            <h3>âš™ï¸ System Settings</h3>
            <p>System and advanced settings coming soon...</p>
            <p><em>This page will be properly organized in the next phase.</em></p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Message Editor Modal -->
  <div id="messageEditorModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="modalTitle">Edit Messages</h3>
        <button class="modal-close" id="closeModal">Ã—</button>
      </div>
      <div class="modal-body">
        <p class="modal-description">Edit messages for <span id="modalCategory"></span>. Each line will be a separate message.</p>
        <textarea id="messageEditor" placeholder="Enter your messages, one per line..."></textarea>
        <div class="modal-stats">
          <span id="messageCount">0 messages</span>
          <span id="characterCount">0 characters</span>
        </div>
      </div>
      <div class="modal-footer">
        <button id="cancelEdit" class="modal-btn secondary">Cancel</button>
        <button id="testMessages" class="modal-btn secondary">ğŸ”Š Test Random</button>
        <button id="saveMessages" class="modal-btn primary">Save Messages</button>
      </div>
    </div>
  </div>

  <!-- Quick Add Modal -->
  <div id="quickAddModal" class="modal">
    <div class="modal-content small">
      <div class="modal-header">
        <h3>Quick Add Message</h3>
        <button class="modal-close" id="closeQuickAdd">Ã—</button>
      </div>
      <div class="modal-body">
        <p>Add a new message to <span id="quickAddCategory"></span>:</p>
        <input type="text" id="quickAddInput" placeholder="Enter your message..." maxlength="200">
        <div class="quick-add-examples">
          <p>Examples:</p>
          <div class="example-buttons" id="exampleButtons"></div>
        </div>
      </div>
      <div class="modal-footer">
        <button id="cancelQuickAdd" class="modal-btn secondary">Cancel</button>
        <button id="testQuickAdd" class="modal-btn secondary">ğŸ”Š Test</button>
        <button id="saveQuickAdd" class="modal-btn primary">Add Message</button>
      </div>
    </div>
  </div>

  <!-- Load JavaScript Modules -->
  <script src="src/settings.js"></script>
  <script src="src/speech.js"></script>
  <script src="src/timer.js"></script>
  <script src="src/ui.js"></script>
  <script src="src/messageEditor.js"></script>
  <script src="src/caption.js"></script>
  <script src="src/keyboard.js"></script>
  <script src="src/SettingsTabManager.js"></script>
  
  <!-- WI-005.4: Dynamic Tab Modules -->
  <script src="src/settings-tabs/BaseTab.js"></script>
  <script src="src/settings-tabs/TimerTab.js"></script>
  
  <script src="src/app.js"></script>
</body>
</html>
